<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizza R√≠o</title>

    <link rel="stylesheet" href="css/style1.css">
    <link rel="stylesheet" href="css/pos.css">
    <link rel="stylesheet" href="css/admin.css">

    <!-- Vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Google Maps -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAYcO6RxgS1q1GjGki_OOH0GbXoJW5ogV0&callback=initMap"></script>

    <!-- QR Code CDN -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
</head>

<body>

    <div id="app">
        <header class="bk-header">

            <div class="logo">
                <img src="images/pizzaoceanohdPENEg.png" alt="Logo Pizza Rio" class="logo-icon">
                <h1>Pizza R√≠o</h1>
            </div>

            <nav>
                <a href="#" @click.prevent="currentView = 'home-view'">Inicio</a>
                <a href="#" v-if="!user || user.role !== 'Cajero'"
                    @click.prevent="currentView = 'showcase-view'">Men√∫</a>
                <a href="#" v-if="user && user.role === 'Cajero'" @click.prevent="currentView = 'pos-view'">Pedidos</a>
                <a href="#" @click.prevent="currentView = 'map-view'">Sucursales</a>
                <a href="#" v-if="user && user.role !== 'Cajero'"
                    @click.prevent="currentView = 'myorders-view'">Pedidos</a>

                <a href="#" v-if="user && user.role === 'Administrador'"
                    @click.prevent="currentView = 'admin-employees-view'">Administraci√≥n</a>

                <a href="#" v-if="user && user.role === 'Administrador'"
                    @click.prevent="currentView = 'admin-schedules-view'">Horarios</a>
            </nav>

            <div class="auth-buttons">

                <!-- PERFIL -->
                <div v-if="user" class="user-profile-container">

                    <button @click="toggleUserMenu" class="btn-user-profile">
                        üë§ {{ user.nombre }} ‚ñº
                    </button>

                    <div v-if="showUserMenu" class="user-dropdown">

                        <div class="dropdown-header">
                            <div style="font-weight: 900; font-size: 1.1rem; color: #333; margin-bottom: 4px;">
                                {{ user.nombre }}
                            </div>
                            <small style="color: #888; text-transform: uppercase; font-size: 0.75rem;">
                                {{ user.role }}
                            </small>
                        </div>

                        <a href="#" @click.prevent="logout" class="dropdown-item danger">
                            Cerrar Sesi√≥n üö™
                        </a>
                    </div>
                </div>

                <!-- BOT√ìN LOGIN -->
                <button v-else @click="goToLogin" class="btn-pide-aqui">PIDE AQU√ç</button>
            </div>

        </header>

        <main class="main-content">
            <component 
                :is="currentView" 
                :user="user"
                :carrito="carritoCheckout"
                @update:carrito="carritoCheckout = $event"
                @navigate="handleNavigation"
                @login-success="handleLoginSuccess"
                @go-checkout="goToCheckout"
                @logout="logout">
            </component>
        </main>

        <footer class="pizza-rio-footer">
            <p>&copy; 2025 Pizza R√≠o Bolivia. Todos los derechos reservados.</p>
        </footer>
    </div>

    <script type="module" src="js/app.js"></script>
</body>

</html>
